<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Interesting and/or useful things (to me)"><link rel="shortcut icon" href=https://phunh.github.io/favicon.ico><link rel=stylesheet href=/css/style.min.ffbd2639ac503caa3b261c32e3e1533fad01e3662072d49d4c38167e4d9e6708.css><title>Toggle KRunner in Plasma 5.17</title></head><body><header id=banner><h2><a href=https://phunh.github.io/posts/toggle-krunner-plasma-5.17/>Toggle KRunner in Plasma 5.17</a></h2><nav><ul><li><a href=https://phunh.github.io>home</a></li><li><a class=active href=/posts/>posts</a></li><li><a href=/notes/>notes</a></li><li><a href=/tags/>tags</a></li><li><a href=/about/>about</a></li></ul></nav></header><main id=content><article><header id=post-header><small><time>25 Mar 2020</time></small><div class=tagline>Phu
&emsp;|&emsp;2 minutes&emsp;|&emsp;Tags:
&nbsp;<a class=tag href=/tags/kde/>kde</a>
&nbsp;<a class=tag href=/tags/plasma-5.17/>plasma 5.17</a>
&nbsp;<a class=tag href=/tags/krunner/>krunner</a>
&nbsp;<a class=tag href=/tags/workaround/>workaround</a></div></header><p>On my Fedora KDE machine, I use KRunner instead of the Application Menu to launch programs, since it can also do other stuff like executing commands, calculating expressions, etc., which is quite convenient.</p><p>Previously on Plasma 5.16, setting Meta key shortcut to</p><pre tabindex=0><code>org.kde.kglobalaccel,/component/krunner,,invokeShortcut,run
</code></pre><p>command in kwinrc is enough to make KRunner toggleable using Meta key. However, this doesn&rsquo;t work anymore in Plasma 5.17. KRunner can now only be opened with Meta key if we set the shortcut to</p><pre tabindex=0><code>org.kde.krunner,/App,,display
</code></pre><p>Wanna close it? Reach to the Esc key.</p><p>I was stuck with this for some days, until this morning I just looked through my bookmark collection with no real purpose and saw the title &ldquo;KDE 5.17: KRunner or KRunner_Desktop ?&rdquo; of <a href=https://www.reddit.com/r/archlinux/comments/dkfkvj/kde_517_krunner_or_krunner_desktop/>a Reddit post</a> 5 months ago. And&mldr;</p><p>The solution is:</p><ul><li>Install xdotool</li><li>Copy the guy&rsquo;s code to make a bash script<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>krunnerWindow</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>xdotool getwindowfocus getwindowname<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>[[</span> <span style=color:#000>$krunnerWindow</span> <span style=color:#ce5c00;font-weight:700>==</span> *<span style=color:#4e9a06>&#34;krunner&#34;</span>* <span style=color:#ce5c00;font-weight:700>]]</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>then</span>
</span></span><span style=display:flex><span>    xdotool key <span style=color:#4e9a06>&#39;Escape&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87>exit</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>else</span>
</span></span><span style=display:flex><span>    qdbus org.kde.krunner /App display
</span></span><span style=display:flex><span>    <span style=color:#204a87>exit</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>fi</span></span></span></code></pre></div></li><li>Create a custom global shortcut:<ul><li><em>System Settings</em> > <em>Shortcuts</em> > <em>Custom Shortcuts</em> > <em>Edit</em> > <em>New</em> > <em>Global Shortcut</em> > <em>Command/URL</em></li><li>Point to the bash script in the new shortcut&rsquo;s <em>Action</em> tab</li></ul></li><li>Open <code>~/.config/khotkeysrc</code>, find the UUID of the new shortcut</li><li>Set Meta key shortcut in kwinrc to <code>org.kde.kglobalaccel,/component/khotkeys,org.kde.kglobalaccel.Component,invokeShortcut,&lt;UUID></code> (the UUID includes the curly brackets)</li></ul><p>Maybe I should get the newest KDE software instead of going with what Fedora maintainers give me, so that I&rsquo;m not so far behind online discussions.</p><footer><a class=next href=https://phunh.github.io/posts/problem-grubby-f31/>Next >></a><section class=comments id=comment-section><hr><div class=comments__existing><h2>One comment</h2><article id=comment-16ade3d0-96a0-11ea-944b-bdfb90e44253 class="js-comment comment" uid=16ade3d0-96a0-11ea-944b-bdfb90e44253><div class=comment__author><img alt="Gravatar for Phu" src="https://secure.gravatar.com/avatar/d11c8125547f587477e48ac075b238b3?s=64&amp;d=retro&amp;r=pg" srcset="https://secure.gravatar.com/avatar/d11c8125547f587477e48ac075b238b3?s=128&amp;d=retro&amp;r=pg 2x" class="avatar avatar-64 photo" height=64 width=64 style=padding-right:5px;padding-bottom:5px>
<a class=u-email href="mailto:phuhnguyen at disroot dot org">Phu</a> on
<span class="comment__date anchored" data-anchor-id=comment-16ade3d0-96a0-11ea-944b-bdfb90e44253>15 May 2020</span></div><div class=comment__body>comment after using GH actions</div><div class=comment__meta><a rel=nofollow class=comment__reply-link onclick='return addComment.moveForm("comment-16ade3d0-96a0-11ea-944b-bdfb90e44253","respond","16ade3d0-96a0-11ea-944b-bdfb90e44253")'>↪&#xFE0E; Reply to Phu</a></div></article><hr style="border-top:1px solid #ccc;background:0 0;margin-bottom:10px"></div><div id=respond class=comment__new><form class="js-form form" method=post action=https://phunh-staticman.onrender.com/v2/entry/phunh/phunh.github.io/source/comments><input type=hidden name=options[origin] value=/posts/toggle-krunner-plasma-5.17/>
<input type=hidden name=options[slug] value=toggle-krunner-plasma-5.17>
<input type=hidden name=fields[reply_to] id=comment-reply-to><div class=textfield><label for=comment-form-message><h2>Add Comment<small><a rel=nofollow id=cancel-comment-reply-link href=/posts/toggle-krunner-plasma-5.17/#respond style=display:none> (cancel reply)</a></small></h2><textarea class=textfield__input name=fields[message] type=text id=comment-form-message placeholder="Your comment (markdown accepted)"></textarea></label></div><div class=textfield><label for=comment-form-name>Name
<input class=textfield__input name=fields[name] type=text id=comment-form-name placeholder="Your name (required)"></label></div><div class=textfield><label for=comment-form-email>E-mail
<input class=textfield__input name=fields[email] type=email id=comment-form-email placeholder="Your email (optional, for displaying Gravatar)"></label></div><div class="textfield hp"><label for=hp><input class=textfield__input name=fields[hp] id=hp type=text placeholder="Leave blank"></label></div><button class=button id=comment-form-submit>
Submit</button></form><article class="modal mdl-card mdl-shadow--2dp"><div><h3 class="modal-title js-modal-title"></h3></div><div class="mdl-card__supporting-text js-modal-text"></div><div class="mdl-card__actions mdl-card--border"><button class="button mdl-button--colored mdl-js-button mdl-js-ripple-effect js-close-modal">Close</button></div></article><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><symbol id="icon-loading" viewBox="149.8 37.8 499.818 525"><path d="M557.8 187.8c13.8.0 24.601-10.8 24.601-24.6S571.6 138.6 557.8 138.6s-24.6 10.8-24.6 24.6c0 13.2 10.8 24.6 24.6 24.6zm61.2 90.6c-16.8.0-30.6 13.8-30.6 30.6s13.8 30.6 30.6 30.6 30.6-13.8 30.6-30.6c.6-16.8-13.2-30.6-30.6-30.6zm-61.2 145.2c-20.399.0-36.6 16.2-36.6 36.601.0 20.399 16.2 36.6 36.6 36.6s36.601-16.2 36.601-36.6C595 439.8 578.2 423.6 557.8 423.6zM409 476.4c-24 0-43.2 19.199-43.2 43.199s19.2 43.2 43.2 43.2 43.2-19.2 43.2-43.2S433 476.4 409 476.4zM260.8 411c-27 0-49.2 22.2-49.2 49.2s22.2 49.2 49.2 49.2 49.2-22.2 49.2-49.2-22.2-49.2-49.2-49.2zm-10.2-102c0-27.6-22.8-50.4-50.4-50.4s-50.4 22.8-50.4 50.4c0 27.6 22.8 50.4 50.4 50.4s50.4-22.2 50.4-50.4zm10.2-199.8c-30 0-54 24-54 54s24 54 54 54 54-24 54-54-24.6-54-54-54zM409 37.8c-35.4.0-63.6 28.8-63.6 63.6S374.2 165 409 165s63.6-28.8 63.6-63.6-28.2-63.6-63.6-63.6z"/></symbol></svg></div></section><script src=https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js></script>
<script src=/js/jquery-comment.js></script></footer></article></main><footer id=footer><div>Copyright © 2023 Phu Hung Nguyen ● <a href=https://github.com/phunh target=_blank>GitHub</a></div><div>Foo or Phu? - Interesting and/or useful things (to me)</div></footer></body></html>