<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Interesting and/or useful things (to me)"><link rel="shortcut icon" href=https://phunh.github.io/favicon.ico><link rel=stylesheet href=/css/style.min.ffbd2639ac503caa3b261c32e3e1533fad01e3662072d49d4c38167e4d9e6708.css><title>Bash</title></head><body><header id=banner><h2><a href=https://phunh.github.io/notes/bash/>Bash</a></h2><nav><ul><li><a href=https://phunh.github.io>home</a></li><li><a href=/posts/>posts</a></li><li><a class=active href=/notes/>notes</a></li><li><a href=/tags/>tags</a></li><li><a href=/about/>about</a></li></ul></nav></header><main id=content><article><header id=post-header><small><time>Last updated: 14 May 2020</time></small><div class=tagline>Phu
&emsp;|&emsp;2 minutes&emsp;|&emsp;Tags:
&nbsp;<a class=tag href=/tags/bash/>bash</a>
&nbsp;<a class=tag href=/tags/linux/>linux</a></div></header><h3 id=math>Math</h3><ul><li><code>bc -l</code></li><li><code>expr</code>: there must be spaces between expression parts</li><li><code>\*</code>: <code>*</code> has a special meaning to Bash so it needs to be escaped</li><li><code>let</code></li><li>calculation: <code>$((b++))</code> includes assignment (assignment first then evaluation), <code>((b++))</code> no assignment only evaluation</li></ul><h3 id=commands>Commands</h3><ul><li>command substitution:<pre tabindex=0><code>$(command)
`command`
</code></pre></li><li><code>()</code>: runs commands in a subshell</li><li><code>{}</code>: runs commands in the current shell</li></ul><h3 id=variables>Variables</h3><ul><li>assignments: no space on either side of the equal sign</li><li>global by default</li><li><code>$@</code>: list of arguments; <code>$1</code>, <code>$2</code>, etc: first, second, etc. argument; <code>$#</code>: number of arguments</li></ul><h3 id=user-input>User input</h3><ul><li><code>read</code></li></ul><h3 id=logic-and-if-else>Logic and If-else</h3><ul><li><code>$?</code>: last exit status. <code>&&</code> continues only after <code>$?</code> == 0, <code>||</code> continues only after <code>$?</code> != 0</li><li>conditional expression: <code>[ ]</code> POSIX compliant, <code>[[ ]]</code> extension to the standard, supporting extra operations</li><li>logical flags:<ul><li><code>[[ 4 -gt 3 ]] && echo t || echo f</code> : prints t;</li><li><code>[[ -e math.sh ]]</code> : checks if a file exists;</li><li><code>-d</code> : a dir exists;</li><li><code>-z</code>, <code>-n</code>: string length is zero, non-zero</li></ul></li><li>logical operators:<ul><li>regex: <code>[[ "sean" =~ ^s.+n$ ]] && echo t || echo f</code> : prints t;</li><li>NOT: <code>[[ ! 7 -gt 2 ]] && echo t || echo f</code> : prints f;</li><li><code>=</code>, <code>!=</code> : string equal, not equal</li></ul></li></ul><h3 id=arrays>Arrays</h3><ul><li>indexed and associative</li><li>init: <code>a=(1 2 3)</code>, <code>declare -a a=(1 2 3)</code> (indexed), <code>declare -A</code> (associative), <code>declare</code>: local by default</li><li>get: <code>${a[0]}</code>, <code>${a[*]}</code> expanding to one single argument, <code>${a[@]}</code> expanding to distinct arguments, a part: <code>${a[*]:1:2}</code> : 2 3, length: <code>${#a[*]}</code> : 3</li><li>set: <code>a[0]=0</code></li><li>concat: <code>a+=(3 4 5)</code></li></ul><h3 id=braces>Braces</h3><ul><li>sequence: <code>{ .. }</code>, <code>a{0..4}c</code>, <code>{1..3}{a..c}</code>; with variables: <code>start=4; end=9; eval echo {$start..$end}</code> : 4 5 6 7 8 9</li><li>combine: <code>{{1..3},{a..c}}</code></li></ul><h3 id=loops>Loops</h3><pre tabindex=0><code>for i in 1 2 3
do
  ...
done
</code></pre><pre tabindex=0><code>while [[ ]]
do
  ...
done
</code></pre><h3 id=functions>Functions</h3><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#f () {</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>function</span> f <span style=color:#ce5c00;font-weight:700>{</span>
</span></span><span style=display:flex><span>  <span style=color:#204a87>local</span> <span style=color:#000>result</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>  <span style=color:#204a87>echo</span> <span style=color:#000>$result</span>
</span></span><span style=display:flex><span><span style=color:#ce5c00;font-weight:700>}</span></span></span></code></pre></div></article></main><footer id=footer><div>Copyright © 2023 Phu Hung Nguyen ● <a href=https://github.com/phunh target=_blank>GitHub</a></div><div>Foo or Phu? - Interesting and/or useful things (to me)</div></footer></body></html>