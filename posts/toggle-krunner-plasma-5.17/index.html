<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Interesting and/or useful things (to me)"><link rel="shortcut icon" href=https://phunh.github.io/favicon.ico><link rel=stylesheet href=/css/style.min.609872059387950283d8b6ce9f9f1d1d35946704e753486966b9b6d2afe0ccc3.css><title>Toggle KRunner in Plasma 5.17</title></head><body><header id=banner><h2><a href=https://phunh.github.io/posts/toggle-krunner-plasma-5.17/>Toggle KRunner in Plasma 5.17</a></h2><nav><ul><li><a href=https://phunh.github.io>home</a></li><li><a class=active href=/posts/>posts</a></li><li><a href=/notes/>notes</a></li><li><a href=/tags/>tags</a></li><li><a href=/about/>about</a></li></ul></nav></header><main id=content><article><header id=post-header><small><time>25 Mar 2020</time></small><div class=tagline>Phu
&emsp;|&emsp;2 minutes&emsp;|&emsp;Tags:
&nbsp;<a class=tag href=/tags/kde/>kde</a>
&nbsp;<a class=tag href=/tags/plasma-5.17/>plasma 5.17</a>
&nbsp;<a class=tag href=/tags/krunner/>krunner</a>
&nbsp;<a class=tag href=/tags/workaround/>workaround</a></div></header><p>On my Fedora KDE machine, I use KRunner instead of the Application Menu to launch programs, since it can also do other stuff like executing commands, calculating expressions, etc., which is quite convenient.</p><p>Previously on Plasma 5.16, setting Meta key shortcut to <code>org.kde.kglobalaccel,/component/krunner,,invokeShortcut,run command</code> in kwinrc is enough to make KRunner toggleable using Meta key. However, this doesn&rsquo;t work anymore in Plasma 5.17. KRunner can now only be opened with Meta key if we set the shortcut to <code>org.kde.krunner,/App,,display</code>. Wanna close it? Reach to the Esc key.</p><p>I was stuck with this for some days, until this morning I just looked through my bookmark collection with no real purpose and saw the title &ldquo;KDE 5.17: KRunner or KRunner_Desktop ?&rdquo; of <a href=https://www.reddit.com/r/archlinux/comments/dkfkvj/kde_517_krunner_or_krunner_desktop/>a Reddit post</a> 5 months ago. And&mldr;</p><p>The solution is:</p><ul><li>Install xdotool</li><li>Copy the guy&rsquo;s code to make a bash script<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>krunnerWindow</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>xdotool getwindowfocus getwindowname<span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#ce5c00;font-weight:700>[[</span> <span style=color:#000>$krunnerWindow</span> <span style=color:#ce5c00;font-weight:700>==</span> *<span style=color:#4e9a06>&#34;krunner&#34;</span>* <span style=color:#ce5c00;font-weight:700>]]</span><span style=color:#000;font-weight:700>;</span> <span style=color:#204a87;font-weight:700>then</span>
</span></span><span style=display:flex><span>    xdotool key <span style=color:#4e9a06>&#39;Escape&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#204a87>exit</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>else</span>
</span></span><span style=display:flex><span>    qdbus org.kde.krunner /App display
</span></span><span style=display:flex><span>    <span style=color:#204a87>exit</span> <span style=color:#0000cf;font-weight:700>0</span>
</span></span><span style=display:flex><span><span style=color:#204a87;font-weight:700>fi</span></span></span></code></pre></div></li><li>Create a custom global shortcut:<ul><li><em>System Settings</em> > <em>Shortcuts</em> > <em>Custom Shortcuts</em> > <em>Edit</em> > <em>New</em> > <em>Global Shortcut</em> > <em>Command/URL</em></li><li>Point to the bash script in the new shortcut&rsquo;s <em>Action</em> tab</li></ul></li><li>Open <code>~/.config/khotkeysrc</code>, find the UUID of the new shortcut</li><li>Set Meta key shortcut in kwinrc to <code>org.kde.kglobalaccel,/component/khotkeys,org.kde.kglobalaccel.Component,invokeShortcut,&lt;UUID></code> (the UUID includes the curly brackets)</li></ul><p>Maybe I should get the newest KDE software instead of going with what Fedora maintainers give me, so that I&rsquo;m not so far behind online discussions.</p><footer><a class=next href=https://phunh.github.io/posts/problem-grubby-f31/>Next >></a></footer></article></main><footer id=footer><div>Copyright © 2022 Phu Hung Nguyen</div><div>Foo or Phu? - Interesting and/or useful things (to me)</div><div><a href=https://github.com/phunh target=_blank>GitHub</a>
● <a href=https://twitter.com/phuhnguyen target=_blank>Twitter</a></div></footer></body></html>